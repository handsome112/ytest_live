'use strict';const a57_0x4c7b=['createSagas','getConversationDetail','getConversationsSuccess','createConversation','default','655UKDjDF','768243QKmfCa','__esModule','loadMoreMessagesSuccess','_id','getConversationsFail','resolve','flatten','readAllInConversation','loadMessagesSuccess','searchConversations','payload','setActiveConversationSuccess','getConversations','loadMessagesFail','1295019syLEql','put','763030wLhyKt','41RJNjeQ','select','redux-saga/effects','sendMessageFail','error','757099QTlmhO','21196YwReGG','messageService','getConversationDetailSuccess','sendMessageSuccess','fetching','fetchingMessage','mapping','message','searchConversationsSuccess','898iVlHOc','./actions','getMessages','readMessages','defineProperty','data','sendMessage','total','conversation','Error\x20occured,\x20please\x20try\x20again\x20later','loadMessages','1720113HFXXAp'];const a57_0x5ea7ad=a57_0x2a84;(function(_0x3bca63,_0x213247){const _0x24b59b=a57_0x2a84;while(!![]){try{const _0x49cfb8=-parseInt(_0x24b59b(0xd7))+parseInt(_0x24b59b(0xdf))+-parseInt(_0x24b59b(0xd9))+-parseInt(_0x24b59b(0xb7))*-parseInt(_0x24b59b(0xc8))+parseInt(_0x24b59b(0xc9))+parseInt(_0x24b59b(0xc2))+parseInt(_0x24b59b(0xe0))*-parseInt(_0x24b59b(0xda));if(_0x49cfb8===_0x213247)break;else _0x3bca63['push'](_0x3bca63['shift']());}catch(_0x228c08){_0x3bca63['push'](_0x3bca63['shift']());}}}(a57_0x4c7b,0xdd540));Object[a57_0x5ea7ad(0xbb)](exports,a57_0x5ea7ad(0xca),{'value':!![]});function a57_0x2a84(_0x59ca1e,_0x4d3d1a){return a57_0x2a84=function(_0x4c7b9b,_0x2a84a7){_0x4c7b9b=_0x4c7b9b-0xb0;let _0x5c8728=a57_0x4c7b[_0x4c7b9b];return _0x5c8728;},a57_0x2a84(_0x59ca1e,_0x4d3d1a);}const lodash_1=require('lodash'),effects_1=require(a57_0x5ea7ad(0xdc)),redux_1=require('@lib/redux'),message_service_1=require('@services/message.service'),antd_1=require('antd'),actions_1=require(a57_0x5ea7ad(0xb8)),conversationSagas=[{'on':actions_1['getConversations'],*'worker'(_0x55d7d7){const _0x4005bc=a57_0x5ea7ad;try{const _0x415744=yield message_service_1[_0x4005bc(0xe1)]['getConversations'](_0x55d7d7[_0x4005bc(0xd3)]);yield effects_1[_0x4005bc(0xd8)](actions_1[_0x4005bc(0xc5)](_0x415744[_0x4005bc(0xbc)]));}catch(_0x1f8eca){const _0x1b73b8=yield Promise[_0x4005bc(0xce)](_0x1f8eca);yield effects_1[_0x4005bc(0xd8)](actions_1[_0x4005bc(0xcd)](_0x1b73b8));}}},{'on':actions_1[a57_0x5ea7ad(0xd2)],*'worker'(_0x3d159a){const _0x13a17c=a57_0x5ea7ad;try{const _0x472d14=yield message_service_1['messageService'][_0x13a17c(0xd5)](_0x3d159a[_0x13a17c(0xd3)]);yield effects_1[_0x13a17c(0xd8)](actions_1[_0x13a17c(0xb6)](_0x472d14[_0x13a17c(0xbc)]));}catch(_0x4802fc){const _0x3c59d9=yield Promise[_0x13a17c(0xce)](_0x4802fc);yield effects_1[_0x13a17c(0xd8)](actions_1['searchConversationsFail'](_0x3c59d9));}}},{'on':actions_1['setActiveConversation'],*'worker'(_0x28db5d){const _0x1b3da8=a57_0x5ea7ad;try{const {source:_0x21d497,sourceId:_0x53da00,conversationId:_0x5052d5,recipientId:_0x5d7733}=_0x28db5d[_0x1b3da8(0xd3)],_0x3c56be=yield effects_1[_0x1b3da8(0xdb)](_0x44c591=>_0x44c591[_0x1b3da8(0xbf)][_0x1b3da8(0xb4)]);if(_0x5052d5){if(_0x3c56be[_0x5052d5]){yield effects_1[_0x1b3da8(0xd8)](actions_1[_0x1b3da8(0xd4)](_0x3c56be[_0x5052d5]));const _0x6507c8=yield message_service_1[_0x1b3da8(0xe1)][_0x1b3da8(0xd0)](_0x5052d5,_0x5d7733);_0x6507c8&&(yield effects_1[_0x1b3da8(0xd8)](actions_1[_0x1b3da8(0xba)](_0x5052d5))),yield effects_1['put'](actions_1[_0x1b3da8(0xc1)]({'conversationId':_0x5052d5,'limit':0x19,'offset':0x0}));}else{}}else{const _0xdf9d01=yield message_service_1[_0x1b3da8(0xe1)][_0x1b3da8(0xc6)]({'source':_0x21d497,'sourceId':_0x53da00}),_0x2ad80c=_0xdf9d01['data'];_0x3c56be[_0x2ad80c[_0x1b3da8(0xcc)]]?yield effects_1['put'](actions_1[_0x1b3da8(0xd4)](_0x3c56be[_0x2ad80c[_0x1b3da8(0xcc)]])):yield effects_1[_0x1b3da8(0xd8)](actions_1['setActiveConversationSuccess'](_0x2ad80c)),yield effects_1[_0x1b3da8(0xd8)](actions_1['loadMessages']({'conversationId':_0x2ad80c[_0x1b3da8(0xcc)],'limit':0x19,'offset':0x0}));}}catch(_0x48a53a){antd_1[_0x1b3da8(0xb5)][_0x1b3da8(0xde)](_0x1b3da8(0xc0)),yield effects_1[_0x1b3da8(0xd8)](actions_1['setActiveConversationFail'](_0x48a53a));}}},{'on':actions_1[a57_0x5ea7ad(0xc4)],*'worker'(_0x572860){const _0x5586a2=a57_0x5ea7ad;try{const _0x4a4f32=yield message_service_1[_0x5586a2(0xe1)][_0x5586a2(0xc4)](_0x572860[_0x5586a2(0xd3)]['id']);yield effects_1[_0x5586a2(0xd8)](actions_1[_0x5586a2(0xb0)](_0x4a4f32['data']));}catch(_0x56d0f9){yield effects_1[_0x5586a2(0xd8)](actions_1[_0x5586a2(0xcd)](_0x56d0f9));}}}],messageSagas=[{'on':actions_1[a57_0x5ea7ad(0xc1)],*'worker'(_0xeb64ac){const _0x21f607=a57_0x5ea7ad;try{const _0x590a76=effects_1['select'](_0x2022aa=>_0x2022aa['message']['mapping']),{conversationId:_0x2700a3,offset:_0x300600,limit:_0x3442ab}=_0xeb64ac[_0x21f607(0xd3)];if(_0x590a76[_0x2700a3]&&_0x590a76[_0x2700a3][_0x21f607(0xb2)])return;yield effects_1[_0x21f607(0xd8)](actions_1['fetchingMessage']({'conversationId':_0x2700a3}));const _0x454955=yield message_service_1[_0x21f607(0xe1)][_0x21f607(0xb9)](_0x2700a3,{'offset':_0x300600,'limit':_0x3442ab});yield effects_1['put'](actions_1[_0x21f607(0xd1)]({'conversationId':_0x2700a3,'items':_0x454955[_0x21f607(0xbc)]['data'],'total':_0x454955[_0x21f607(0xbc)]['total']}));}catch(_0x5d43eb){antd_1[_0x21f607(0xb5)][_0x21f607(0xde)](_0x21f607(0xc0)),yield effects_1[_0x21f607(0xd8)](actions_1[_0x21f607(0xd6)](_0x5d43eb));}}},{'on':actions_1['loadMoreMessages'],*'worker'(_0x418e82){const _0x282cfc=a57_0x5ea7ad;try{const _0x12dcec=effects_1[_0x282cfc(0xdb)](_0x3819d5=>_0x3819d5['message'][_0x282cfc(0xb4)]),{conversationId:_0x10ef1a,offset:_0x5df318,limit:_0x1bd1d3}=_0x418e82[_0x282cfc(0xd3)];if(_0x12dcec[_0x10ef1a]&&_0x12dcec[_0x10ef1a][_0x282cfc(0xb2)])return;yield effects_1[_0x282cfc(0xd8)](actions_1[_0x282cfc(0xb3)]({'conversationId':_0x10ef1a}));const _0x595c2e=yield message_service_1[_0x282cfc(0xe1)]['getMessages'](_0x10ef1a,{'offset':_0x5df318,'limit':_0x1bd1d3});yield effects_1[_0x282cfc(0xd8)](actions_1[_0x282cfc(0xcb)]({'conversationId':_0x10ef1a,'items':_0x595c2e[_0x282cfc(0xbc)][_0x282cfc(0xbc)],'total':_0x595c2e[_0x282cfc(0xbc)][_0x282cfc(0xbe)]}));}catch(_0x2703c9){antd_1['message'][_0x282cfc(0xde)](_0x282cfc(0xc0)),yield effects_1[_0x282cfc(0xd8)](actions_1['loadMoreMessagesFail'](_0x2703c9));}}},{'on':actions_1[a57_0x5ea7ad(0xbd)],*'worker'(_0x100c28){const _0x19d68c=a57_0x5ea7ad;try{const {conversationId:_0x4c14f9,data:_0x536d59}=_0x100c28['payload'],_0xeb7ea9=yield message_service_1['messageService'][_0x19d68c(0xbd)](_0x4c14f9,_0x536d59);yield effects_1[_0x19d68c(0xd8)](actions_1[_0x19d68c(0xb1)](_0xeb7ea9['data'])),yield effects_1[_0x19d68c(0xd8)](actions_1['updateLastMessage']({'conversationId':_0x4c14f9,'lastMessage':_0x536d59['text']}));}catch(_0x367f16){yield effects_1[_0x19d68c(0xd8)](actions_1[_0x19d68c(0xdd)](_0x367f16));}}}];exports[a57_0x5ea7ad(0xc7)]=lodash_1[a57_0x5ea7ad(0xcf)]([redux_1[a57_0x5ea7ad(0xc3)](conversationSagas),redux_1[a57_0x5ea7ad(0xc3)](messageSagas)]);