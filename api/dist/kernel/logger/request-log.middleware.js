'use strict';const a42_0x1152=['452857ukKbYH','283MsJKDU','defineProperty','5452BhVzXz','1257094eqPtOi','221823JhbZWn','function','RequestLogModel','214JfKcRL','@nestjs/common','query','929dfGnpd','toString','./request-log.model','getOwnPropertyDescriptor','ascii','1XbXroe','1962PgoIjC','replace','headers','__esModule','length','4010029zQLdKJ','base64','split','path','RequestLoggerMiddleware'];const a42_0xd7ccea=a42_0x13e6;(function(_0x2a1150,_0xc0a096){const _0x4284ff=a42_0x13e6;while(!![]){try{const _0x32df06=-parseInt(_0x4284ff(0x10b))+-parseInt(_0x4284ff(0x101))+-parseInt(_0x4284ff(0x10f))+-parseInt(_0x4284ff(0xf8))*parseInt(_0x4284ff(0x10e))+parseInt(_0x4284ff(0x10c))*-parseInt(_0x4284ff(0xfb))+-parseInt(_0x4284ff(0x110))+parseInt(_0x4284ff(0x106))*parseInt(_0x4284ff(0x100));if(_0x32df06===_0xc0a096)break;else _0x2a1150['push'](_0x2a1150['shift']());}catch(_0x201e75){_0x2a1150['push'](_0x2a1150['shift']());}}}(a42_0x1152,0x9de02));var __decorate=this&&this['__decorate']||function(_0x5f11b8,_0x215ca8,_0x11b78a,_0x220167){const _0x5f5745=a42_0x13e6;var _0x18fada=arguments[_0x5f5745(0x105)],_0x39da55=_0x18fada<0x3?_0x215ca8:_0x220167===null?_0x220167=Object[_0x5f5745(0xfe)](_0x215ca8,_0x11b78a):_0x220167,_0x57f3ee;if(typeof Reflect==='object'&&typeof Reflect['decorate']===_0x5f5745(0x111))_0x39da55=Reflect['decorate'](_0x5f11b8,_0x215ca8,_0x11b78a,_0x220167);else{for(var _0x2a1599=_0x5f11b8[_0x5f5745(0x105)]-0x1;_0x2a1599>=0x0;_0x2a1599--)if(_0x57f3ee=_0x5f11b8[_0x2a1599])_0x39da55=(_0x18fada<0x3?_0x57f3ee(_0x39da55):_0x18fada>0x3?_0x57f3ee(_0x215ca8,_0x11b78a,_0x39da55):_0x57f3ee(_0x215ca8,_0x11b78a))||_0x39da55;}return _0x18fada>0x3&&_0x39da55&&Object['defineProperty'](_0x215ca8,_0x11b78a,_0x39da55),_0x39da55;};function a42_0x13e6(_0x2acf25,_0x468160){return a42_0x13e6=function(_0x1152d4,_0x13e657){_0x1152d4=_0x1152d4-0xf8;let _0x273236=a42_0x1152[_0x1152d4];return _0x273236;},a42_0x13e6(_0x2acf25,_0x468160);}Object[a42_0xd7ccea(0x10d)](exports,a42_0xd7ccea(0x104),{'value':!![]}),exports['RequestLoggerMiddleware']=void 0x0;const common_1=require(a42_0xd7ccea(0xf9)),request_log_model_1=require(a42_0xd7ccea(0xfd));function parseJwt(_0x5196d4){const _0x1c178f=a42_0xd7ccea;try{const _0x252308=_0x5196d4[_0x1c178f(0x108)]('.')[0x1],_0xc87322=_0x252308[_0x1c178f(0x102)](/-/g,'+')[_0x1c178f(0x102)](/_/g,'/'),_0x545faf=Buffer['from'](_0xc87322,_0x1c178f(0x107)),_0x4c5abb=_0x545faf[_0x1c178f(0xfc)](_0x1c178f(0xff));return JSON['parse'](_0x4c5abb);}catch(_0x4048d3){return null;}}let RequestLoggerMiddleware=class RequestLoggerMiddleware{async['use'](_0x583a0d,_0x3a0aa7,_0x5debb3){const _0x4b6c26=a42_0xd7ccea;try{const _0x3cc212={'path':_0x583a0d[_0x4b6c26(0x109)],'headers':_0x583a0d[_0x4b6c26(0x103)],'query':_0x583a0d[_0x4b6c26(0xfa)],'body':_0x583a0d['body']},_0x93139a=_0x583a0d[_0x4b6c26(0x103)]['authorization']||_0x583a0d[_0x4b6c26(0xfa)]['token'];if(_0x93139a){const _0xc1aae9=_0x93139a['split']('\x20'),_0x365525=parseJwt(_0xc1aae9['length']>0x1?_0xc1aae9[0x1]:_0xc1aae9[0x0]);_0x365525&&(_0x3cc212['authData']=_0x365525);}const _0x36d0e7=new request_log_model_1[(_0x4b6c26(0x112))](_0x3cc212);await _0x36d0e7['save'](),_0x5debb3();}catch(_0x34aed9){_0x5debb3(_0x34aed9);}}};RequestLoggerMiddleware=__decorate([common_1['Injectable']()],RequestLoggerMiddleware),exports[a42_0xd7ccea(0x10a)]=RequestLoggerMiddleware;