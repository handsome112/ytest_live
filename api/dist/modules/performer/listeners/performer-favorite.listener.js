'use strict';const a329_0x11ec=['216373HsLYcW','log','includes','PerformerFavoriteListener','787rXaynn','data','DELETED','CREATED','13daPPTc','updateOne','Injectable','queueEventService','object','../../favourite/constants','performerModel','QueueEventService','777585PQaTGX','__decorate','HANDLE_FAVORITE_FOR_PERFORMER','subscribe','__esModule','1162aHshxJ','function','EVENT','19pCBHwx','getOwnPropertyDescriptor','612058bUJWuE','handleFavorite','__param','defineProperty','1TxTORW','@nestjs/common','design:paramtypes','65174KugOIs','../../../kernel','../../../kernel/constants','decorate','4775HuYshU','__metadata','140581UlNPjh','bind','5pvZLmr'];const a329_0x2c0b06=a329_0xdec3;(function(_0x96f8b1,_0x1ed473){const _0x3b279f=a329_0xdec3;while(!![]){try{const _0x42d38e=parseInt(_0x3b279f(0x152))+-parseInt(_0x3b279f(0x162))+parseInt(_0x3b279f(0x172))*parseInt(_0x3b279f(0x156))+-parseInt(_0x3b279f(0x159))*-parseInt(_0x3b279f(0x161))+parseInt(_0x3b279f(0x15d))*-parseInt(_0x3b279f(0x150))+-parseInt(_0x3b279f(0x14d))*-parseInt(_0x3b279f(0x166))+parseInt(_0x3b279f(0x15f))*-parseInt(_0x3b279f(0x16a));if(_0x42d38e===_0x1ed473)break;else _0x96f8b1['push'](_0x96f8b1['shift']());}catch(_0x4415a7){_0x96f8b1['push'](_0x96f8b1['shift']());}}}(a329_0x11ec,0x78efc));var __decorate=this&&this[a329_0x2c0b06(0x173)]||function(_0x35d168,_0xc410fa,_0x52d9fe,_0x57ce67){const _0x5ef7b5=a329_0x2c0b06;var _0x2b0b2e=arguments['length'],_0x37518e=_0x2b0b2e<0x3?_0xc410fa:_0x57ce67===null?_0x57ce67=Object[_0x5ef7b5(0x151)](_0xc410fa,_0x52d9fe):_0x57ce67,_0x193499;if(typeof Reflect===_0x5ef7b5(0x16e)&&typeof Reflect[_0x5ef7b5(0x15c)]===_0x5ef7b5(0x14e))_0x37518e=Reflect['decorate'](_0x35d168,_0xc410fa,_0x52d9fe,_0x57ce67);else{for(var _0x467e62=_0x35d168['length']-0x1;_0x467e62>=0x0;_0x467e62--)if(_0x193499=_0x35d168[_0x467e62])_0x37518e=(_0x2b0b2e<0x3?_0x193499(_0x37518e):_0x2b0b2e>0x3?_0x193499(_0xc410fa,_0x52d9fe,_0x37518e):_0x193499(_0xc410fa,_0x52d9fe))||_0x37518e;}return _0x2b0b2e>0x3&&_0x37518e&&Object['defineProperty'](_0xc410fa,_0x52d9fe,_0x37518e),_0x37518e;},__metadata=this&&this[a329_0x2c0b06(0x15e)]||function(_0x2b5a1c,_0x14025d){const _0x534835=a329_0x2c0b06;if(typeof Reflect===_0x534835(0x16e)&&typeof Reflect['metadata']==='function')return Reflect['metadata'](_0x2b5a1c,_0x14025d);},__param=this&&this[a329_0x2c0b06(0x154)]||function(_0xf1d76b,_0x210dd5){return function(_0x1da3e3,_0x47e514){_0x210dd5(_0x1da3e3,_0x47e514,_0xf1d76b);};};function a329_0xdec3(_0x3c8f5d,_0x200e5c){return a329_0xdec3=function(_0x11ecc3,_0xdec348){_0x11ecc3=_0x11ecc3-0x14b;let _0x45b9b8=a329_0x11ec[_0x11ecc3];return _0x45b9b8;},a329_0xdec3(_0x3c8f5d,_0x200e5c);}Object[a329_0x2c0b06(0x155)](exports,a329_0x2c0b06(0x14c),{'value':!![]}),exports[a329_0x2c0b06(0x165)]=void 0x0;const common_1=require(a329_0x2c0b06(0x157)),kernel_1=require(a329_0x2c0b06(0x15a)),constants_1=require(a329_0x2c0b06(0x16f)),mongoose_1=require('mongoose'),constants_2=require(a329_0x2c0b06(0x15b)),providers_1=require('../providers'),HANDLE_FAVORITE_FOR_PERFORMER=a329_0x2c0b06(0x174);let PerformerFavoriteListener=class PerformerFavoriteListener{constructor(_0x45a960,_0x1ef089){const _0x43817d=a329_0x2c0b06;this[_0x43817d(0x16d)]=_0x45a960,this[_0x43817d(0x170)]=_0x1ef089,this[_0x43817d(0x16d)][_0x43817d(0x14b)](constants_1['PERFORMER_FAVORITE_CHANNEL'],HANDLE_FAVORITE_FOR_PERFORMER,this[_0x43817d(0x153)][_0x43817d(0x160)](this));}async[a329_0x2c0b06(0x153)](_0x49a8c3){const _0x18c70f=a329_0x2c0b06;try{const {eventName:_0x3c0357}=_0x49a8c3;if(![constants_2[_0x18c70f(0x14f)][_0x18c70f(0x169)],constants_2[_0x18c70f(0x14f)][_0x18c70f(0x168)]][_0x18c70f(0x164)](_0x3c0357))return;const {performerId:_0x55f0cf}=_0x49a8c3[_0x18c70f(0x167)],_0x3e9ed3=_0x3c0357===constants_2['EVENT'][_0x18c70f(0x169)]?0x1:-0x1;await this[_0x18c70f(0x170)][_0x18c70f(0x16b)]({'_id':_0x55f0cf},{'$inc':{'stats.favorites':_0x3e9ed3}});}catch(_0x928866){console[_0x18c70f(0x163)](_0x928866);}}};PerformerFavoriteListener=__decorate([common_1[a329_0x2c0b06(0x16c)](),__param(0x1,common_1['Inject'](providers_1['PERFORMER_MODEL_PROVIDER'])),__metadata(a329_0x2c0b06(0x158),[kernel_1[a329_0x2c0b06(0x171)],mongoose_1['Model']])],PerformerFavoriteListener),exports[a329_0x2c0b06(0x165)]=PerformerFavoriteListener;