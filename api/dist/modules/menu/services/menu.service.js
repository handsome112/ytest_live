'use strict';const a206_0x226e=['delete','__esModule','metadata','checkOrdering','141245xiMwrF','../providers','@nestjs/common','mongoose','_id','function','__param','165559JNQdcy','MenuDto','29244enLZIn','7CTnByv','MENU_PROVIDER','__decorate','create','62374twvpft','../models','countDocuments','save','390745ZvCRIu','length','175652LkYaMW','1qxNQiQ','ordering','MenuService','design:paramtypes','6stlUuk','Inject','Menu','../dtos','defineProperty','447883JINhpT','1wTCppw','Injectable','findById','merge','Model','assign','NotFoundException','findOne','object','MenuModel'];const a206_0x4fd3e=a206_0x5a48;(function(_0x4bed8b,_0x262662){const _0x3850cd=a206_0x5a48;while(!![]){try{const _0x34aeee=parseInt(_0x3850cd(0xc1))+-parseInt(_0x3850cd(0x9b))*parseInt(_0x3850cd(0x98))+parseInt(_0x3850cd(0xb3))*parseInt(_0x3850cd(0xa5))+parseInt(_0x3850cd(0xbc))*parseInt(_0x3850cd(0xbd))+-parseInt(_0x3850cd(0x9a))+-parseInt(_0x3850cd(0xa4))+parseInt(_0x3850cd(0x9f))*parseInt(_0x3850cd(0xba));if(_0x34aeee===_0x262662)break;else _0x4bed8b['push'](_0x4bed8b['shift']());}catch(_0x2114cf){_0x4bed8b['push'](_0x4bed8b['shift']());}}}(a206_0x226e,0x5e949));var __decorate=this&&this[a206_0x4fd3e(0xbf)]||function(_0x1f39c1,_0x495f0a,_0x4fd338,_0x14216a){const _0x2da68b=a206_0x4fd3e;var _0xc1ca98=arguments['length'],_0x1457fa=_0xc1ca98<0x3?_0x495f0a:_0x14216a===null?_0x14216a=Object['getOwnPropertyDescriptor'](_0x495f0a,_0x4fd338):_0x14216a,_0x1ed3be;if(typeof Reflect===_0x2da68b(0xad)&&typeof Reflect['decorate']===_0x2da68b(0xb8))_0x1457fa=Reflect['decorate'](_0x1f39c1,_0x495f0a,_0x4fd338,_0x14216a);else{for(var _0x1440e0=_0x1f39c1[_0x2da68b(0x99)]-0x1;_0x1440e0>=0x0;_0x1440e0--)if(_0x1ed3be=_0x1f39c1[_0x1440e0])_0x1457fa=(_0xc1ca98<0x3?_0x1ed3be(_0x1457fa):_0xc1ca98>0x3?_0x1ed3be(_0x495f0a,_0x4fd338,_0x1457fa):_0x1ed3be(_0x495f0a,_0x4fd338))||_0x1457fa;}return _0xc1ca98>0x3&&_0x1457fa&&Object['defineProperty'](_0x495f0a,_0x4fd338,_0x1457fa),_0x1457fa;},__metadata=this&&this['__metadata']||function(_0x189367,_0x2a990b){const _0x1f26a6=a206_0x4fd3e;if(typeof Reflect==='object'&&typeof Reflect['metadata']==='function')return Reflect[_0x1f26a6(0xb1)](_0x189367,_0x2a990b);},__param=this&&this[a206_0x4fd3e(0xb9)]||function(_0x28117d,_0x53ba6b){return function(_0x285017,_0x4781b7){_0x53ba6b(_0x285017,_0x4781b7,_0x28117d);};};Object[a206_0x4fd3e(0xa3)](exports,a206_0x4fd3e(0xb0),{'value':!![]}),exports['MenuService']=void 0x0;const common_1=require(a206_0x4fd3e(0xb5)),mongoose_1=require(a206_0x4fd3e(0xb6)),lodash_1=require('lodash'),providers_1=require(a206_0x4fd3e(0xb4)),models_1=require(a206_0x4fd3e(0xc2)),dtos_1=require(a206_0x4fd3e(0xa2));let MenuService=class MenuService{constructor(_0x458925){const _0x2f63ac=a206_0x4fd3e;this[_0x2f63ac(0xa1)]=_0x458925;}async['checkOrdering'](_0x532c95,_0x597319){const _0x3f4cb5=a206_0x4fd3e,_0x2d89b7={'ordering':_0x532c95};_0x597319&&(_0x2d89b7[_0x3f4cb5(0xb7)]={'$ne':_0x597319});const _0x3ef177=await this[_0x3f4cb5(0xa1)][_0x3f4cb5(0xc3)](_0x2d89b7);if(!_0x3ef177)return _0x532c95;return this[_0x3f4cb5(0xb2)](_0x532c95+0x1,_0x597319);}async[a206_0x4fd3e(0xa7)](_0x2c6fbb){const _0x5cfd6c=a206_0x4fd3e,_0x31852e={'_id':_0x2c6fbb},_0x407d8f=await this[_0x5cfd6c(0xa1)][_0x5cfd6c(0xac)](_0x31852e);if(!_0x407d8f)return null;return _0x407d8f;}async[a206_0x4fd3e(0xc0)](_0x1bedf9){const _0x2a1b73=a206_0x4fd3e,_0x3e960d=Object[_0x2a1b73(0xaa)](Object['assign']({},_0x1bedf9),{'updatedAt':new Date(),'createdAt':new Date()});_0x3e960d[_0x2a1b73(0x9c)]=await this['checkOrdering'](_0x1bedf9[_0x2a1b73(0x9c)]||0x0);const _0x59b4da=await this[_0x2a1b73(0xa1)]['create'](_0x3e960d);return new dtos_1[(_0x2a1b73(0xbb))](_0x59b4da);}async['update'](_0x343e9a,_0x190783){const _0xab8c21=a206_0x4fd3e,_0x40c46b=await this['findById'](_0x343e9a);if(!_0x40c46b)throw new common_1['NotFoundException']();const _0x55e482=Object['assign'](Object[_0xab8c21(0xaa)]({},_0x190783),{'updatedAt':new Date()});return _0x55e482[_0xab8c21(0x9c)]=await this[_0xab8c21(0xb2)](_0x190783[_0xab8c21(0x9c)]||0x0,_0x40c46b['_id']),lodash_1[_0xab8c21(0xa8)](_0x40c46b,_0x55e482),await _0x40c46b[_0xab8c21(0xc4)](),_0x40c46b;}async[a206_0x4fd3e(0xaf)](_0x559828){const _0x1b8c3c=a206_0x4fd3e,_0x291b31=_0x559828 instanceof models_1[_0x1b8c3c(0xae)]?_0x559828:await this[_0x1b8c3c(0xa7)](_0x559828);if(!_0x291b31)throw new common_1[(_0x1b8c3c(0xab))]('Menu\x20not\x20found');return await this[_0x1b8c3c(0xa1)]['deleteOne']({'_id':_0x559828}),!![];}};function a206_0x5a48(_0x21d61e,_0x28e70d){return a206_0x5a48=function(_0x226e12,_0x5a4841){_0x226e12=_0x226e12-0x98;let _0x3e4039=a206_0x226e[_0x226e12];return _0x3e4039;},a206_0x5a48(_0x21d61e,_0x28e70d);}MenuService=__decorate([common_1[a206_0x4fd3e(0xa6)](),__param(0x0,common_1[a206_0x4fd3e(0xa0)](providers_1[a206_0x4fd3e(0xbe)])),__metadata(a206_0x4fd3e(0x9e),[mongoose_1[a206_0x4fd3e(0xa9)]])],MenuService),exports[a206_0x4fd3e(0x9d)]=MenuService;