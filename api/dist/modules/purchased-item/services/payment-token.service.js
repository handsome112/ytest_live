'use strict';const a478_0x3139=['1lLWiBC','39081TsyVQK','PaymentTokenModel','Injectable','Inject','design:paramtypes','1vTQgOs','1loKjds','getOwnPropertyDescriptor','SALE_VIDEO','87905lRQKWi','Model','mongoose','metadata','181169jCdTkV','34492CbyEyO','../providers','__metadata','findOne','findByQuery','defineProperty','decorate','34xJAVHS','__decorate','_id','1zMNtmI','__esModule','PaymentTokenService','216391RHzBuN','PURCHASE_ITEM_STATUS','264491aIItaL','377661cWMMFx','@nestjs/common','find','SUCCESS','function','../constants','object'];const a478_0xf38917=a478_0xba0c;(function(_0x5b532a,_0x20579f){const _0x4036d2=a478_0xba0c;while(!![]){try{const _0x3fe454=parseInt(_0x4036d2(0xa9))*-parseInt(_0x4036d2(0x99))+parseInt(_0x4036d2(0x96))*-parseInt(_0x4036d2(0x9c))+-parseInt(_0x4036d2(0xaa))*parseInt(_0x4036d2(0x8b))+-parseInt(_0x4036d2(0xad))*-parseInt(_0x4036d2(0xa3))+-parseInt(_0x4036d2(0x9b))+parseInt(_0x4036d2(0xa4))+parseInt(_0x4036d2(0x8c))*parseInt(_0x4036d2(0x93));if(_0x3fe454===_0x20579f)break;else _0x5b532a['push'](_0x5b532a['shift']());}catch(_0x51560b){_0x5b532a['push'](_0x5b532a['shift']());}}}(a478_0x3139,0x3f7a2));var __decorate=this&&this[a478_0xf38917(0x94)]||function(_0x1a82a7,_0x17cfd8,_0x577700,_0x23df86){const _0x346ce6=a478_0xf38917;var _0x23724d=arguments['length'],_0x1f25aa=_0x23724d<0x3?_0x17cfd8:_0x23df86===null?_0x23df86=Object[_0x346ce6(0xab)](_0x17cfd8,_0x577700):_0x23df86,_0x43451b;if(typeof Reflect==='object'&&typeof Reflect[_0x346ce6(0x92)]==='function')_0x1f25aa=Reflect[_0x346ce6(0x92)](_0x1a82a7,_0x17cfd8,_0x577700,_0x23df86);else{for(var _0x14b456=_0x1a82a7['length']-0x1;_0x14b456>=0x0;_0x14b456--)if(_0x43451b=_0x1a82a7[_0x14b456])_0x1f25aa=(_0x23724d<0x3?_0x43451b(_0x1f25aa):_0x23724d>0x3?_0x43451b(_0x17cfd8,_0x577700,_0x1f25aa):_0x43451b(_0x17cfd8,_0x577700))||_0x1f25aa;}return _0x23724d>0x3&&_0x1f25aa&&Object[_0x346ce6(0x91)](_0x17cfd8,_0x577700,_0x1f25aa),_0x1f25aa;},__metadata=this&&this[a478_0xf38917(0x8e)]||function(_0x27b180,_0x4a00ea){const _0x196970=a478_0xf38917;if(typeof Reflect===_0x196970(0xa2)&&typeof Reflect[_0x196970(0x8a)]===_0x196970(0xa0))return Reflect[_0x196970(0x8a)](_0x27b180,_0x4a00ea);},__param=this&&this['__param']||function(_0x35170d,_0x2e2157){return function(_0x498fe5,_0x3c5444){_0x2e2157(_0x498fe5,_0x3c5444,_0x35170d);};};Object[a478_0xf38917(0x91)](exports,a478_0xf38917(0x97),{'value':!![]}),exports[a478_0xf38917(0x98)]=void 0x0;function a478_0xba0c(_0x191bde,_0x10e207){return a478_0xba0c=function(_0x313968,_0xba0c2f){_0x313968=_0x313968-0x88;let _0x53fc4d=a478_0x3139[_0x313968];return _0x53fc4d;},a478_0xba0c(_0x191bde,_0x10e207);}const common_1=require(a478_0xf38917(0x9d)),mongoose_1=require(a478_0xf38917(0x89)),dtos_1=require('../../user/dtos'),providers_1=require(a478_0xf38917(0x8d)),constants_1=require(a478_0xf38917(0xa1));let PaymentTokenService=class PaymentTokenService{constructor(_0x44c49a){const _0x4e0d55=a478_0xf38917;this[_0x4e0d55(0xa5)]=_0x44c49a;}async['checkBoughtVideo'](_0x51ba3f,_0x322f6a){const _0x2ac75c=a478_0xf38917;if(!_0x322f6a)return![];const _0x5568f6=await this[_0x2ac75c(0xa5)][_0x2ac75c(0x8f)]({'targetId':_0x51ba3f,'sourceId':_0x322f6a[_0x2ac75c(0x95)],'type':constants_1['PURCHASE_ITEM_TYPE'][_0x2ac75c(0xac)],'status':constants_1['PURCHASE_ITEM_STATUS'][_0x2ac75c(0x9f)]});return!!_0x5568f6;}async['checkBought'](_0x47bfa6,_0x27ef65,_0x1d5c70){const _0x58574a=a478_0xf38917;if(!_0x1d5c70)return![];const _0x5cc4d7=await this[_0x58574a(0xa5)]['findOne']({'type':_0x27ef65,'targetId':_0x47bfa6,'sourceId':_0x1d5c70[_0x58574a(0x95)],'status':constants_1[_0x58574a(0x9a)]['SUCCESS']});return!!_0x5cc4d7;}async[a478_0xf38917(0x90)](_0x59a250){const _0x1babd0=a478_0xf38917,_0x19d9a1=await this[_0x1babd0(0xa5)][_0x1babd0(0x9e)](_0x59a250);return _0x19d9a1;}};PaymentTokenService=__decorate([common_1[a478_0xf38917(0xa6)](),__param(0x0,common_1[a478_0xf38917(0xa7)](providers_1['PURCHASE_ITEM_MODEL_PROVIDER'])),__metadata(a478_0xf38917(0xa8),[mongoose_1[a478_0xf38917(0x88)]])],PaymentTokenService),exports[a478_0xf38917(0x98)]=PaymentTokenService;