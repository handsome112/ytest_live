'use strict';const a372_0x3b2f=['create','performer/performer-assets/videos','1aEtMYQ','updateInfo','videoSearchService','metadata','UseGuards','363064OpgshA','getDetails','jwToken','__esModule','VideoSearchRequest','__metadata','video','getOwnPropertyDescriptor','remove','Controller','825877ZVnAzL','MultiFileUploadInterceptor','performer','prototype','videoDir','videoService','videoThumbnail','design:paramtypes','videoProtectedDir','VideoCreatePayload','trailer','thumbnail','decorate','ValidationPipe','design:returntype','performer-video','delete','object','length','update','file','Body','CurrentUser','/:id','getConfig','17239AJPOVk','__param','855455uCeQEO','Param','49fuRpRp','Post','../../file','@nestjs/common','DataResponse','UseInterceptors','386596smjoUq','819463uApIBR','PerformerVideosController','PerformerDto','../services/video-search.service','HttpStatus','../payloads/video-create.payload','design:type','performer-video-thumbnail','RoleGuard','../../auth/guards','../../../kernel','Query','../payloads','function','Get','image','details','search','/:id/view','imageDir','1787lPffKr','HttpCode','uploadVideo','../../auth/decorators','../../performer/dtos','performerSearch','158UlUbTq','FilesUploaded','VideoUpdatePayload','defineProperty','Roles','performer-trailer-video'];const a372_0x1129af=a372_0x57ec;(function(_0x215337,_0x1a4dc9){const _0x59e458=a372_0x57ec;while(!![]){try{const _0x28f452=-parseInt(_0x59e458(0x1f3))+parseInt(_0x59e458(0x1c2))+parseInt(_0x59e458(0x1e9))+-parseInt(_0x59e458(0x1bb))*-parseInt(_0x59e458(0x1b7))+parseInt(_0x59e458(0x1c1))+-parseInt(_0x59e458(0x1b9))*parseInt(_0x59e458(0x1e4))+parseInt(_0x59e458(0x1d6))*-parseInt(_0x59e458(0x1dc));if(_0x28f452===_0x1a4dc9)break;else _0x215337['push'](_0x215337['shift']());}catch(_0x2d38c6){_0x215337['push'](_0x215337['shift']());}}}(a372_0x3b2f,0x6de6c));function a372_0x57ec(_0x3433eb,_0x126241){return a372_0x57ec=function(_0x3b2f5e,_0x57ecc2){_0x3b2f5e=_0x3b2f5e-0x1a1;let _0x2d034b=a372_0x3b2f[_0x3b2f5e];return _0x2d034b;},a372_0x57ec(_0x3433eb,_0x126241);}var __decorate=this&&this['__decorate']||function(_0x2a6df4,_0x212355,_0x2eecab,_0x21a9be){const _0x2ba9a8=a372_0x57ec;var _0xe64892=arguments[_0x2ba9a8(0x1b0)],_0x248fcb=_0xe64892<0x3?_0x212355:_0x21a9be===null?_0x21a9be=Object[_0x2ba9a8(0x1f0)](_0x212355,_0x2eecab):_0x21a9be,_0x427441;if(typeof Reflect===_0x2ba9a8(0x1af)&&typeof Reflect['decorate']==='function')_0x248fcb=Reflect[_0x2ba9a8(0x1aa)](_0x2a6df4,_0x212355,_0x2eecab,_0x21a9be);else{for(var _0x314f37=_0x2a6df4[_0x2ba9a8(0x1b0)]-0x1;_0x314f37>=0x0;_0x314f37--)if(_0x427441=_0x2a6df4[_0x314f37])_0x248fcb=(_0xe64892<0x3?_0x427441(_0x248fcb):_0xe64892>0x3?_0x427441(_0x212355,_0x2eecab,_0x248fcb):_0x427441(_0x212355,_0x2eecab))||_0x248fcb;}return _0xe64892>0x3&&_0x248fcb&&Object[_0x2ba9a8(0x1df)](_0x212355,_0x2eecab,_0x248fcb),_0x248fcb;},__metadata=this&&this[a372_0x1129af(0x1ee)]||function(_0xe63e3d,_0x4a6ad9){const _0x14e6c3=a372_0x1129af;if(typeof Reflect==='object'&&typeof Reflect[_0x14e6c3(0x1e7)]===_0x14e6c3(0x1cf))return Reflect['metadata'](_0xe63e3d,_0x4a6ad9);},__param=this&&this[a372_0x1129af(0x1b8)]||function(_0x16331b,_0x454fa7){return function(_0x3af2cf,_0x1b5e7a){_0x454fa7(_0x3af2cf,_0x1b5e7a,_0x16331b);};};Object['defineProperty'](exports,a372_0x1129af(0x1ec),{'value':!![]}),exports[a372_0x1129af(0x1c3)]=void 0x0;const common_1=require(a372_0x1129af(0x1be)),guards_1=require(a372_0x1129af(0x1cb)),kernel_1=require(a372_0x1129af(0x1cc)),decorators_1=require(a372_0x1129af(0x1d9)),file_1=require(a372_0x1129af(0x1bd)),dtos_1=require(a372_0x1129af(0x1da)),video_create_payload_1=require(a372_0x1129af(0x1c7)),video_service_1=require('../services/video.service'),payloads_1=require(a372_0x1129af(0x1ce)),video_search_service_1=require(a372_0x1129af(0x1c5));let PerformerVideosController=class PerformerVideosController{constructor(_0x193095,_0x4f6cca){const _0x34d287=a372_0x1129af;this['videoService']=_0x193095,this[_0x34d287(0x1e6)]=_0x4f6cca;}async[a372_0x1129af(0x1d8)](_0x251be5,_0x5dd992,_0x552733){const _0x5ce463=a372_0x1129af,_0x3fbd4e=await this[_0x5ce463(0x1a3)][_0x5ce463(0x1e2)](_0x251be5['video'],_0x251be5[_0x5ce463(0x1a8)],_0x251be5[_0x5ce463(0x1a9)],_0x5dd992,_0x552733);return kernel_1[_0x5ce463(0x1bf)]['ok'](_0x3fbd4e);}async['details'](_0x1cfd51,_0x37462a){const _0x5fd61e=a372_0x1129af,_0x42f5e4=await this[_0x5fd61e(0x1a3)][_0x5fd61e(0x1ea)](_0x1cfd51,_0x37462a[_0x5fd61e(0x1eb)]);return kernel_1[_0x5fd61e(0x1bf)]['ok'](_0x42f5e4);}async['search'](_0xdbf442,_0x26d5c9,_0x9f47b7){const _0x4ecfb8=a372_0x1129af,_0x54cdd0=await this[_0x4ecfb8(0x1e6)][_0x4ecfb8(0x1db)](_0xdbf442,_0x26d5c9,_0x9f47b7[_0x4ecfb8(0x1eb)]);return kernel_1[_0x4ecfb8(0x1bf)]['ok'](_0x54cdd0);}async[a372_0x1129af(0x1b1)](_0x193e26,_0x493120,_0x4a94b3,_0x10e6b2){const _0x17fec1=a372_0x1129af,_0x1289f7=await this['videoService'][_0x17fec1(0x1e5)](_0x193e26,_0x493120,_0x4a94b3['video'],_0x4a94b3[_0x17fec1(0x1a8)],_0x4a94b3[_0x17fec1(0x1a9)],_0x10e6b2);return kernel_1[_0x17fec1(0x1bf)]['ok'](_0x1289f7);}async[a372_0x1129af(0x1f1)](_0x462bf1){const _0x3b7faa=a372_0x1129af,_0x14a44f=await this[_0x3b7faa(0x1a3)][_0x3b7faa(0x1ae)](_0x462bf1);return kernel_1[_0x3b7faa(0x1bf)]['ok'](_0x14a44f);}};__decorate([common_1[a372_0x1129af(0x1bc)]('/upload'),common_1[a372_0x1129af(0x1d7)](common_1['HttpStatus']['OK']),decorators_1[a372_0x1129af(0x1e0)](a372_0x1129af(0x1f5)),common_1['UseGuards'](guards_1['RoleGuard']),common_1['UseInterceptors'](file_1[a372_0x1129af(0x1f4)]([{'type':a372_0x1129af(0x1ad),'fieldName':'video','options':{'destination':kernel_1['getConfig'](a372_0x1129af(0x1b2))[a372_0x1129af(0x1a6)]}},{'type':a372_0x1129af(0x1e1),'fieldName':a372_0x1129af(0x1a8),'options':{'destination':kernel_1['getConfig'](a372_0x1129af(0x1b2))[a372_0x1129af(0x1a2)]}},{'type':a372_0x1129af(0x1c9),'fieldName':'thumbnail','options':{'destination':kernel_1[a372_0x1129af(0x1b6)](a372_0x1129af(0x1b2))[a372_0x1129af(0x1d5)],'generateThumbnail':!![],'replaceWithThumbail':!![],'thumbnailSize':kernel_1[a372_0x1129af(0x1b6)](a372_0x1129af(0x1d1))['videoThumbnail']}}],{})),__param(0x0,file_1[a372_0x1129af(0x1dd)]()),__param(0x1,common_1[a372_0x1129af(0x1b3)]()),__param(0x2,decorators_1[a372_0x1129af(0x1b4)]()),__metadata(a372_0x1129af(0x1c8),Function),__metadata(a372_0x1129af(0x1a5),[Object,video_create_payload_1[a372_0x1129af(0x1a7)],dtos_1[a372_0x1129af(0x1c4)]]),__metadata('design:returntype',Promise)],PerformerVideosController[a372_0x1129af(0x1a1)],a372_0x1129af(0x1d8),null),__decorate([common_1[a372_0x1129af(0x1d0)](a372_0x1129af(0x1d4)),common_1[a372_0x1129af(0x1d7)](common_1['HttpStatus']['OK']),decorators_1[a372_0x1129af(0x1e0)]('performer'),common_1[a372_0x1129af(0x1e8)](guards_1['RoleGuard']),__param(0x0,common_1[a372_0x1129af(0x1ba)]('id')),__param(0x1,common_1['Request']()),__metadata(a372_0x1129af(0x1c8),Function),__metadata(a372_0x1129af(0x1a5),[String,Object]),__metadata(a372_0x1129af(0x1ac),Promise)],PerformerVideosController[a372_0x1129af(0x1a1)],a372_0x1129af(0x1d2),null),__decorate([common_1[a372_0x1129af(0x1d0)]('/search'),common_1[a372_0x1129af(0x1d7)](common_1['HttpStatus']['OK']),decorators_1[a372_0x1129af(0x1e0)]('performer'),common_1[a372_0x1129af(0x1e8)](guards_1[a372_0x1129af(0x1ca)]),__param(0x0,common_1[a372_0x1129af(0x1cd)]()),__param(0x1,decorators_1[a372_0x1129af(0x1b4)]()),__param(0x2,common_1['Request']()),__metadata('design:type',Function),__metadata('design:paramtypes',[payloads_1[a372_0x1129af(0x1ed)],dtos_1[a372_0x1129af(0x1c4)],Object]),__metadata(a372_0x1129af(0x1ac),Promise)],PerformerVideosController[a372_0x1129af(0x1a1)],a372_0x1129af(0x1d3),null),__decorate([common_1['Put'](a372_0x1129af(0x1b5)),common_1['HttpCode'](common_1[a372_0x1129af(0x1c6)]['OK']),decorators_1['Roles'](a372_0x1129af(0x1f5)),common_1[a372_0x1129af(0x1e8)](guards_1['RoleGuard']),common_1[a372_0x1129af(0x1c0)](file_1[a372_0x1129af(0x1f4)]([{'type':a372_0x1129af(0x1ad),'fieldName':a372_0x1129af(0x1ef),'options':{'destination':kernel_1[a372_0x1129af(0x1b6)]('file')[a372_0x1129af(0x1a6)]}},{'type':a372_0x1129af(0x1e1),'fieldName':'trailer','options':{'destination':kernel_1['getConfig'](a372_0x1129af(0x1b2))[a372_0x1129af(0x1a2)]}},{'type':'performer-video-thumbnail','fieldName':a372_0x1129af(0x1a9),'options':{'destination':kernel_1[a372_0x1129af(0x1b6)](a372_0x1129af(0x1b2))[a372_0x1129af(0x1d5)],'generateThumbnail':!![],'replaceWithThumbail':!![],'thumbnailSize':kernel_1[a372_0x1129af(0x1b6)]('image')[a372_0x1129af(0x1a4)]}}],{})),common_1['UsePipes'](new common_1[(a372_0x1129af(0x1ab))]({'transform':!![]})),__param(0x0,common_1['Param']('id')),__param(0x1,common_1[a372_0x1129af(0x1b3)]()),__param(0x2,file_1['FilesUploaded']()),__param(0x3,decorators_1['CurrentUser']()),__metadata(a372_0x1129af(0x1c8),Function),__metadata('design:paramtypes',[String,payloads_1[a372_0x1129af(0x1de)],Object,dtos_1[a372_0x1129af(0x1c4)]]),__metadata('design:returntype',Promise)],PerformerVideosController[a372_0x1129af(0x1a1)],a372_0x1129af(0x1b1),null),__decorate([common_1['Delete']('/:id'),common_1[a372_0x1129af(0x1d7)](common_1[a372_0x1129af(0x1c6)]['OK']),decorators_1[a372_0x1129af(0x1e0)](a372_0x1129af(0x1f5)),common_1[a372_0x1129af(0x1e8)](guards_1[a372_0x1129af(0x1ca)]),__param(0x0,common_1[a372_0x1129af(0x1ba)]('id')),__metadata(a372_0x1129af(0x1c8),Function),__metadata(a372_0x1129af(0x1a5),[String]),__metadata(a372_0x1129af(0x1ac),Promise)],PerformerVideosController[a372_0x1129af(0x1a1)],a372_0x1129af(0x1f1),null),PerformerVideosController=__decorate([common_1['Injectable'](),common_1[a372_0x1129af(0x1f2)](a372_0x1129af(0x1e3)),__metadata(a372_0x1129af(0x1a5),[video_service_1['VideoService'],video_search_service_1['VideoSearchService']])],PerformerVideosController),exports[a372_0x1129af(0x1c3)]=PerformerVideosController;