'use strict';const a53_0x499f=['password','LoginByEmailPayload','design:paramtypes','AuthService','metadata','INACTIVE','requireEmailVerification','SettingService','getOwnPropertyDescriptor','username','../../../kernel','390419SaQydL','generateJWT','performers/login','378525COuGfS','360844QZsERL','design:type','UsernameOrPasswordIncorrectException','performers/login/email','DataResponse','AccountNotFoundxception','emailVerified','verifyPassword','__metadata','HttpStatus','decorate','loginByEmail','__esModule','design:returntype','Please\x20verify\x20your\x20email','status','HttpCode','200819Jhlrfk','@nestjs/common','../services','Body','getValueByKey','__param','prototype','Post','__decorate','1WJPahj','loginByUsername','HttpException','remember','performerService','performer','Your\x20account\x20is\x20disabled.\x20Please\x20contact\x20the\x20admin\x20for\x20details!','email','LoginByUsernamePayload','findBySource','AccountInactiveException','authService','../../settings','EmailNotVerifiedException','2261281llTaJG','PerformerLoginController','findById','EntityNotFoundException','PENDING','object','3wPgKoI','auth','Controller','PERFORMER_STATUSES','PerformerService','../../performer/constants','defineProperty','767411gzTVvy','1177432deghiO','../../performer/services','function','sourceId','length'];const a53_0x30870e=a53_0x6ef4;(function(_0x57e1d1,_0x2d6be3){const _0x184c44=a53_0x6ef4;while(!![]){try{const _0x3d5814=parseInt(_0x184c44(0x168))+-parseInt(_0x184c44(0x182))*parseInt(_0x184c44(0x179))+parseInt(_0x184c44(0x19e))+-parseInt(_0x184c44(0x167))*-parseInt(_0x184c44(0x196))+parseInt(_0x184c44(0x19d))+-parseInt(_0x184c44(0x164))+-parseInt(_0x184c44(0x190));if(_0x3d5814===_0x2d6be3)break;else _0x57e1d1['push'](_0x57e1d1['shift']());}catch(_0x3d98f4){_0x57e1d1['push'](_0x57e1d1['shift']());}}}(a53_0x499f,0x8fbc7));var __decorate=this&&this[a53_0x30870e(0x181)]||function(_0x3fd255,_0x3b2007,_0xc61067,_0x5430aa){const _0x1e1e5a=a53_0x30870e;var _0x1731c7=arguments['length'],_0x50df0b=_0x1731c7<0x3?_0x3b2007:_0x5430aa===null?_0x5430aa=Object[_0x1e1e5a(0x161)](_0x3b2007,_0xc61067):_0x5430aa,_0x264ba8;if(typeof Reflect===_0x1e1e5a(0x195)&&typeof Reflect[_0x1e1e5a(0x172)]===_0x1e1e5a(0x156))_0x50df0b=Reflect[_0x1e1e5a(0x172)](_0x3fd255,_0x3b2007,_0xc61067,_0x5430aa);else{for(var _0x12f1d8=_0x3fd255[_0x1e1e5a(0x158)]-0x1;_0x12f1d8>=0x0;_0x12f1d8--)if(_0x264ba8=_0x3fd255[_0x12f1d8])_0x50df0b=(_0x1731c7<0x3?_0x264ba8(_0x50df0b):_0x1731c7>0x3?_0x264ba8(_0x3b2007,_0xc61067,_0x50df0b):_0x264ba8(_0x3b2007,_0xc61067))||_0x50df0b;}return _0x1731c7>0x3&&_0x50df0b&&Object[_0x1e1e5a(0x19c)](_0x3b2007,_0xc61067,_0x50df0b),_0x50df0b;},__metadata=this&&this[a53_0x30870e(0x170)]||function(_0x29f254,_0x26494e){const _0x2b7242=a53_0x30870e;if(typeof Reflect===_0x2b7242(0x195)&&typeof Reflect[_0x2b7242(0x15d)]===_0x2b7242(0x156))return Reflect[_0x2b7242(0x15d)](_0x29f254,_0x26494e);},__param=this&&this[a53_0x30870e(0x17e)]||function(_0x4b9356,_0x3277b6){return function(_0x30dbb9,_0x155822){_0x3277b6(_0x30dbb9,_0x155822,_0x4b9356);};};Object[a53_0x30870e(0x19c)](exports,a53_0x30870e(0x174),{'value':!![]}),exports[a53_0x30870e(0x191)]=void 0x0;function a53_0x6ef4(_0x22f942,_0x21c6be){return a53_0x6ef4=function(_0x499ffe,_0x6ef421){_0x499ffe=_0x499ffe-0x156;let _0x1fa0c2=a53_0x499f[_0x499ffe];return _0x1fa0c2;},a53_0x6ef4(_0x22f942,_0x21c6be);}const common_1=require(a53_0x30870e(0x17a)),kernel_1=require(a53_0x30870e(0x163)),services_1=require(a53_0x30870e(0x19f)),constants_1=require(a53_0x30870e(0x19b)),settings_1=require(a53_0x30870e(0x18e)),exceptions_1=require('../exceptions'),payloads_1=require('../payloads'),services_2=require(a53_0x30870e(0x17b));let PerformerLoginController=class PerformerLoginController{constructor(_0x5ee32a,_0xeb54e8){const _0x255a16=a53_0x30870e;this[_0x255a16(0x186)]=_0x5ee32a,this['authService']=_0xeb54e8;}async['loginByUsername'](_0x546826){const _0x46dfb9=a53_0x30870e,_0x11e2b9=await this[_0x46dfb9(0x18d)][_0x46dfb9(0x18b)]({'source':_0x46dfb9(0x187),'type':'username','key':_0x546826[_0x46dfb9(0x162)]});if(!_0x11e2b9)throw new exceptions_1['AccountNotFoundxception']();if(!this[_0x46dfb9(0x18d)][_0x46dfb9(0x16f)](_0x546826[_0x46dfb9(0x159)],_0x11e2b9))throw new exceptions_1[(_0x46dfb9(0x16a))]();const _0x2795e8=await this['performerService'][_0x46dfb9(0x192)](_0x11e2b9[_0x46dfb9(0x157)]);if(!_0x2795e8)throw new kernel_1[(_0x46dfb9(0x193))]();if(settings_1[_0x46dfb9(0x160)]['getValueByKey'](_0x46dfb9(0x15f))&&_0x2795e8['status']===constants_1[_0x46dfb9(0x199)]['PENDING']||settings_1[_0x46dfb9(0x160)][_0x46dfb9(0x17d)]('requireEmailVerification')&&!_0x2795e8[_0x46dfb9(0x16e)])throw new exceptions_1[(_0x46dfb9(0x18f))]();if(_0x2795e8[_0x46dfb9(0x177)]===constants_1['PERFORMER_STATUSES']['PENDING'])throw new common_1[(_0x46dfb9(0x184))](_0x46dfb9(0x176),0x190);else{if(_0x2795e8[_0x46dfb9(0x177)]===constants_1['PERFORMER_STATUSES'][_0x46dfb9(0x15e)])throw new exceptions_1[(_0x46dfb9(0x18c))]();}return kernel_1[_0x46dfb9(0x16c)]['ok']({'token':this['authService'][_0x46dfb9(0x165)](_0x11e2b9,{'expiresIn':_0x546826[_0x46dfb9(0x185)]?0x3c*0x3c*0x16d:0x3c*0x3c*0x18})});}async[a53_0x30870e(0x173)](_0x4e7dae){const _0x21cb29=a53_0x30870e,_0x2b968e=await this['authService']['findBySource']({'source':'performer','type':_0x21cb29(0x189),'key':_0x4e7dae[_0x21cb29(0x189)]});if(!_0x2b968e)throw new exceptions_1[(_0x21cb29(0x16d))]();if(!this[_0x21cb29(0x18d)][_0x21cb29(0x16f)](_0x4e7dae[_0x21cb29(0x159)],_0x2b968e))throw new exceptions_1['EmailOrPasswordIncorrectException']();const _0x253f5d=await this[_0x21cb29(0x186)][_0x21cb29(0x192)](_0x2b968e['sourceId']);if(!_0x253f5d)throw new kernel_1[(_0x21cb29(0x193))]();if(settings_1[_0x21cb29(0x160)][_0x21cb29(0x17d)](_0x21cb29(0x15f))&&_0x253f5d[_0x21cb29(0x177)]===constants_1['PERFORMER_STATUSES'][_0x21cb29(0x194)]||settings_1[_0x21cb29(0x160)]['getValueByKey'](_0x21cb29(0x15f))&&!_0x253f5d[_0x21cb29(0x16e)])throw new exceptions_1['EmailNotVerifiedException']();if(_0x253f5d[_0x21cb29(0x177)]===constants_1[_0x21cb29(0x199)]['PENDING'])throw new common_1[(_0x21cb29(0x184))](_0x21cb29(0x176),0x190);else{if(_0x253f5d[_0x21cb29(0x177)]===constants_1[_0x21cb29(0x199)][_0x21cb29(0x15e)])throw new common_1[(_0x21cb29(0x184))](_0x21cb29(0x188),0x191);}return kernel_1[_0x21cb29(0x16c)]['ok']({'token':this['authService'][_0x21cb29(0x165)](_0x2b968e,{'expiresIn':_0x4e7dae['remember']?0x3c*0x3c*0x16d:0x3c*0x3c*0x18})});}};__decorate([common_1[a53_0x30870e(0x180)](a53_0x30870e(0x166)),common_1[a53_0x30870e(0x178)](common_1[a53_0x30870e(0x171)]['OK']),__param(0x0,common_1[a53_0x30870e(0x17c)]()),__metadata('design:type',Function),__metadata(a53_0x30870e(0x15b),[payloads_1[a53_0x30870e(0x18a)]]),__metadata(a53_0x30870e(0x175),Promise)],PerformerLoginController[a53_0x30870e(0x17f)],a53_0x30870e(0x183),null),__decorate([common_1[a53_0x30870e(0x180)](a53_0x30870e(0x16b)),common_1['HttpCode'](common_1['HttpStatus']['OK']),__param(0x0,common_1[a53_0x30870e(0x17c)]()),__metadata(a53_0x30870e(0x169),Function),__metadata(a53_0x30870e(0x15b),[payloads_1[a53_0x30870e(0x15a)]]),__metadata(a53_0x30870e(0x175),Promise)],PerformerLoginController[a53_0x30870e(0x17f)],'loginByEmail',null),PerformerLoginController=__decorate([common_1[a53_0x30870e(0x198)](a53_0x30870e(0x197)),__metadata(a53_0x30870e(0x15b),[services_1[a53_0x30870e(0x19a)],services_2[a53_0x30870e(0x15c)]])],PerformerLoginController),exports['PerformerLoginController']=PerformerLoginController;