'use strict';const a56_0x1816=['StudioService','../exceptions','authService','STUDIO_STATUES','89997DqfrjE','metadata','password','defineProperty','__metadata','auth/studio','PENDING','decorate','studoService','8574BFFAqs','object','__param','studio','AuthService','1RBkQUc','__esModule','../../studio/services','../../../kernel','3jiXGJh','Body','remember','EmailOrPasswordIncorrectException','verifyPassword','status','Post','3866ybtTHm','1307qTEWVx','22SIcZLy','@nestjs/common','INACTIVE','length','StudioLoginController','111422NqLuVQ','AccountInactiveException','../services','emailVerified','email','getValueByKey','1eYEywd','getOwnPropertyDescriptor','design:type','69213JMWwyG','__decorate','function','design:paramtypes','107QUodHz','80555rvzLTj','HttpCode','13XVAEbt','EmailNotVerifiedException','prototype','../../studio/constants'];const a56_0x1c85f0=a56_0x5e04;(function(_0x28870f,_0x2877aa){const _0x3a421e=a56_0x5e04;while(!![]){try{const _0x2d7cee=-parseInt(_0x3a421e(0x1fb))*parseInt(_0x3a421e(0x1e9))+parseInt(_0x3a421e(0x1d8))*-parseInt(_0x3a421e(0x1f9))+parseInt(_0x3a421e(0x1d6))+parseInt(_0x3a421e(0x1fa))*-parseInt(_0x3a421e(0x20d))+parseInt(_0x3a421e(0x200))*parseInt(_0x3a421e(0x206))+parseInt(_0x3a421e(0x1e0))*parseInt(_0x3a421e(0x1ee))+parseInt(_0x3a421e(0x1f2))*parseInt(_0x3a421e(0x209));if(_0x2d7cee===_0x2877aa)break;else _0x28870f['push'](_0x28870f['shift']());}catch(_0x43e9b8){_0x28870f['push'](_0x28870f['shift']());}}}(a56_0x1816,0x1b11e));function a56_0x5e04(_0x2f38f2,_0x34da10){return a56_0x5e04=function(_0x181693,_0x5e0458){_0x181693=_0x181693-0x1d6;let _0x57f677=a56_0x1816[_0x181693];return _0x57f677;},a56_0x5e04(_0x2f38f2,_0x34da10);}var __decorate=this&&this[a56_0x1c85f0(0x20a)]||function(_0x46d547,_0x1676eb,_0x196001,_0x52ac53){const _0x51b265=a56_0x1c85f0;var _0x5c8af0=arguments['length'],_0x1e18c7=_0x5c8af0<0x3?_0x1676eb:_0x52ac53===null?_0x52ac53=Object[_0x51b265(0x207)](_0x1676eb,_0x196001):_0x52ac53,_0x1ed09e;if(typeof Reflect==='object'&&typeof Reflect[_0x51b265(0x1e7)]===_0x51b265(0x20b))_0x1e18c7=Reflect[_0x51b265(0x1e7)](_0x46d547,_0x1676eb,_0x196001,_0x52ac53);else{for(var _0x105719=_0x46d547[_0x51b265(0x1fe)]-0x1;_0x105719>=0x0;_0x105719--)if(_0x1ed09e=_0x46d547[_0x105719])_0x1e18c7=(_0x5c8af0<0x3?_0x1ed09e(_0x1e18c7):_0x5c8af0>0x3?_0x1ed09e(_0x1676eb,_0x196001,_0x1e18c7):_0x1ed09e(_0x1676eb,_0x196001))||_0x1e18c7;}return _0x5c8af0>0x3&&_0x1e18c7&&Object['defineProperty'](_0x1676eb,_0x196001,_0x1e18c7),_0x1e18c7;},__metadata=this&&this[a56_0x1c85f0(0x1e4)]||function(_0x255759,_0xf14e34){const _0x30abd9=a56_0x1c85f0;if(typeof Reflect===_0x30abd9(0x1ea)&&typeof Reflect['metadata']==='function')return Reflect[_0x30abd9(0x1e1)](_0x255759,_0xf14e34);},__param=this&&this[a56_0x1c85f0(0x1eb)]||function(_0x297e9c,_0x5867e5){return function(_0x302017,_0x1b984c){_0x5867e5(_0x302017,_0x1b984c,_0x297e9c);};};Object[a56_0x1c85f0(0x1e3)](exports,a56_0x1c85f0(0x1ef),{'value':!![]}),exports[a56_0x1c85f0(0x1ff)]=void 0x0;const common_1=require(a56_0x1c85f0(0x1fc)),kernel_1=require(a56_0x1c85f0(0x1f1)),settings_1=require('../../settings'),services_1=require(a56_0x1c85f0(0x1f0)),constants_1=require(a56_0x1c85f0(0x1db)),exceptions_1=require(a56_0x1c85f0(0x1dd)),payloads_1=require('../payloads'),services_2=require(a56_0x1c85f0(0x202));let StudioLoginController=class StudioLoginController{constructor(_0x35289e,_0x2a9249){const _0x2a0e06=a56_0x1c85f0;this[_0x2a0e06(0x1e8)]=_0x35289e,this[_0x2a0e06(0x1de)]=_0x2a9249;}async['loginByEmail'](_0x211e19){const _0x211cea=a56_0x1c85f0,_0x28675e=await this[_0x211cea(0x1e8)]['findByEmail'](_0x211e19[_0x211cea(0x204)]);if(!_0x28675e)throw new exceptions_1[(_0x211cea(0x1f5))]();const _0x1bc6d6=await this[_0x211cea(0x1de)]['findBySource']({'source':_0x211cea(0x1ec),'type':'email','key':_0x211e19['email']});if(!_0x1bc6d6)throw new exceptions_1['AccountNotFoundxception']();if(!this['authService'][_0x211cea(0x1f6)](_0x211e19[_0x211cea(0x1e2)],_0x1bc6d6))throw new exceptions_1[(_0x211cea(0x1f5))]();if(settings_1['SettingService'][_0x211cea(0x205)]('requireEmailVerification')&&!_0x28675e[_0x211cea(0x203)])throw new exceptions_1['EmailNotVerifiedException']();if(_0x28675e[_0x211cea(0x1f7)]===constants_1[_0x211cea(0x1df)][_0x211cea(0x1e6)])throw new exceptions_1[(_0x211cea(0x1d9))]();else{if(_0x28675e[_0x211cea(0x1f7)]===constants_1[_0x211cea(0x1df)][_0x211cea(0x1fd)])throw new exceptions_1[(_0x211cea(0x201))]();}return kernel_1['DataResponse']['ok']({'token':this[_0x211cea(0x1de)]['generateJWT'](_0x1bc6d6,{'expiresIn':_0x211e19[_0x211cea(0x1f4)]?0x3c*0x3c*0x16d:0x3c*0x3c*0x18})});}};__decorate([common_1[a56_0x1c85f0(0x1f8)]('login'),common_1[a56_0x1c85f0(0x1d7)](common_1['HttpStatus']['OK']),__param(0x0,common_1[a56_0x1c85f0(0x1f3)]()),__metadata(a56_0x1c85f0(0x208),Function),__metadata(a56_0x1c85f0(0x20c),[payloads_1['LoginByEmailPayload']]),__metadata('design:returntype',Promise)],StudioLoginController[a56_0x1c85f0(0x1da)],'loginByEmail',null),StudioLoginController=__decorate([common_1['Controller'](a56_0x1c85f0(0x1e5)),__metadata(a56_0x1c85f0(0x20c),[services_1[a56_0x1c85f0(0x1dc)],services_2[a56_0x1c85f0(0x1ed)]])],StudioLoginController),exports['StudioLoginController']=StudioLoginController;