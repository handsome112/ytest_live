'use strict';const a551_0x4dc4=['4707zpSEkf','getAllTokenRelateStreamId','all','3kaRczq','pick','Bad\x20Request','metadata','/rest/v2/broadcasts/','settingService','RequestService','114Uufqkt','data','error','288068BTDdXW','generateOneTimeToken','Injectable','getBroadcast','1016772IFNuJH','includes','status','get','1319SfeMqZ','../../settings','object','__esModule','httpService','363640rRhVRn','85OiGknS','MissingServerConfig','create','removeAllTokenRelateStreamId','length','531377AQlFGI','ANT_MEDIA_API_ENDPOINT','decorate','post','Stream\x20Server\x20Error','lodash','/tokens/','SETTING_KEYS','../../../kernel','__metadata','../../settings/constants','SettingService','/token','/tokens','getKeyValue','init','statusText','12951QpAJAC','function','design:paramtypes','DataResponse','/rest/v2/broadcasts/create','subscribe','67gQAxcI'];const a551_0x2a61d7=a551_0x4324;function a551_0x4324(_0x50529b,_0x5c3b9f){return a551_0x4324=function(_0x4dc49d,_0x43245e){_0x4dc49d=_0x4dc49d-0x141;let _0x3d4a93=a551_0x4dc4[_0x4dc49d];return _0x3d4a93;},a551_0x4324(_0x50529b,_0x5c3b9f);}(function(_0x186843,_0x1098c9){const _0x43242e=a551_0x4324;while(!![]){try{const _0x373153=parseInt(_0x43242e(0x150))*parseInt(_0x43242e(0x15b))+parseInt(_0x43242e(0x157))+parseInt(_0x43242e(0x153))+parseInt(_0x43242e(0x160))+-parseInt(_0x43242e(0x145))*-parseInt(_0x43242e(0x177))+parseInt(_0x43242e(0x146))*-parseInt(_0x43242e(0x161))+parseInt(_0x43242e(0x166))*-parseInt(_0x43242e(0x149));if(_0x373153===_0x1098c9)break;else _0x186843['push'](_0x186843['shift']());}catch(_0x481363){_0x186843['push'](_0x186843['shift']());}}}(a551_0x4dc4,0xa9071));var __decorate=this&&this['__decorate']||function(_0x2b65ba,_0x5df23f,_0x344666,_0x230fc5){const _0x231b07=a551_0x4324;var _0x3071f7=arguments[_0x231b07(0x165)],_0x2e5473=_0x3071f7<0x3?_0x5df23f:_0x230fc5===null?_0x230fc5=Object['getOwnPropertyDescriptor'](_0x5df23f,_0x344666):_0x230fc5,_0x3d438d;if(typeof Reflect===_0x231b07(0x15d)&&typeof Reflect['decorate']==='function')_0x2e5473=Reflect[_0x231b07(0x168)](_0x2b65ba,_0x5df23f,_0x344666,_0x230fc5);else{for(var _0x2c6db9=_0x2b65ba[_0x231b07(0x165)]-0x1;_0x2c6db9>=0x0;_0x2c6db9--)if(_0x3d438d=_0x2b65ba[_0x2c6db9])_0x2e5473=(_0x3071f7<0x3?_0x3d438d(_0x2e5473):_0x3071f7>0x3?_0x3d438d(_0x5df23f,_0x344666,_0x2e5473):_0x3d438d(_0x5df23f,_0x344666))||_0x2e5473;}return _0x3071f7>0x3&&_0x2e5473&&Object['defineProperty'](_0x5df23f,_0x344666,_0x2e5473),_0x2e5473;},__metadata=this&&this[a551_0x2a61d7(0x16f)]||function(_0xf24cc,_0x2cc9d7){const _0x5e6455=a551_0x2a61d7;if(typeof Reflect==='object'&&typeof Reflect[_0x5e6455(0x14c)]===_0x5e6455(0x178))return Reflect[_0x5e6455(0x14c)](_0xf24cc,_0x2cc9d7);};Object['defineProperty'](exports,a551_0x2a61d7(0x15e),{'value':!![]}),exports[a551_0x2a61d7(0x14f)]=void 0x0;const common_1=require('@nestjs/common'),kernel_1=require(a551_0x2a61d7(0x16e)),lodash_1=require(a551_0x2a61d7(0x16b)),settings_1=require(a551_0x2a61d7(0x15c)),constants_1=require(a551_0x2a61d7(0x170));let RequestService=class RequestService{constructor(_0x4ddf35,_0x4013e6){const _0x4e10e3=a551_0x2a61d7;this[_0x4e10e3(0x15f)]=_0x4ddf35,this[_0x4e10e3(0x14e)]=_0x4013e6;}[a551_0x2a61d7(0x175)](){const _0x255002=a551_0x2a61d7;return Promise[_0x255002(0x148)]([this[_0x255002(0x14e)][_0x255002(0x174)](constants_1[_0x255002(0x16d)][_0x255002(0x167)]),this[_0x255002(0x14e)][_0x255002(0x174)](constants_1[_0x255002(0x16d)]['ANT_MEDIA_APPNAME'])]);}async[a551_0x2a61d7(0x163)](_0x271eb4){const _0x243619=a551_0x2a61d7,[_0x240179,_0x3b7ed2]=await this[_0x243619(0x175)]();if(!_0x240179||!_0x3b7ed2)throw new kernel_1[(_0x243619(0x162))]();return new Promise(_0x48c125=>{const _0x123ce6=_0x243619;this[_0x123ce6(0x15f)][_0x123ce6(0x169)](_0x240179+'/'+_0x3b7ed2+_0x123ce6(0x143),_0x271eb4)[_0x123ce6(0x144)](_0x50c5c3=>{const _0x951306=_0x123ce6;_0x48c125(kernel_1[_0x951306(0x142)]['ok'](_0x50c5c3[_0x951306(0x151)]));},({response:_0x29af8f,code:_0x368140})=>{const _0x416626=_0x123ce6;if(_0x368140){_0x48c125(kernel_1['DataResponse'][_0x416626(0x152)](new Error(_0x416626(0x14b)),_0x368140));return;}if((_0x29af8f===null||_0x29af8f===void 0x0?void 0x0:_0x29af8f[_0x416626(0x159)])&&[0x190,0xc8][_0x416626(0x158)](_0x29af8f['status'])){_0x48c125(kernel_1['DataResponse']['ok'](_0x29af8f[_0x416626(0x151)]));return;}_0x48c125(kernel_1[_0x416626(0x142)][_0x416626(0x152)](new Error(_0x416626(0x16a)),lodash_1[_0x416626(0x14a)](_0x29af8f,[_0x416626(0x176),_0x416626(0x159),'data'])));});});}async[a551_0x2a61d7(0x154)](_0x2b0fd2,_0x25e06f){const _0x20128c=a551_0x2a61d7,[_0x41369f,_0x2993fc]=await this[_0x20128c(0x175)]();if(!_0x41369f||!_0x2993fc)throw new kernel_1[(_0x20128c(0x162))]();return new Promise(_0x26ad44=>{const _0x40308e=_0x20128c;this[_0x40308e(0x15f)][_0x40308e(0x15a)](_0x41369f+'/'+_0x2993fc+_0x40308e(0x14d)+_0x2b0fd2+_0x40308e(0x172),{'params':_0x25e06f})[_0x40308e(0x144)](_0x70e379=>{const _0x163137=_0x40308e;_0x26ad44(kernel_1[_0x163137(0x142)]['ok'](_0x70e379['data']));},({response:_0x261603,code:_0x543dd1})=>{const _0x176f29=_0x40308e;if(_0x543dd1){_0x26ad44(kernel_1[_0x176f29(0x142)][_0x176f29(0x152)](new Error('Bad\x20Request'),_0x543dd1));return;}_0x26ad44(kernel_1[_0x176f29(0x142)][_0x176f29(0x152)](new Error('Stream\x20Server\x20Error'),lodash_1[_0x176f29(0x14a)](_0x261603,[_0x176f29(0x176),_0x176f29(0x159),'data'])));});});}async[a551_0x2a61d7(0x164)](_0x2d2a0e){const _0x184fad=a551_0x2a61d7,[_0x398caa,_0x257d61]=await this[_0x184fad(0x175)]();if(!_0x398caa||!_0x257d61)throw new kernel_1[(_0x184fad(0x162))]();return new Promise(_0x77d129=>{const _0x462471=_0x184fad;this[_0x462471(0x15f)]['delete'](_0x398caa+'/'+_0x257d61+_0x462471(0x14d)+_0x2d2a0e+_0x462471(0x173))['subscribe'](_0x4f61a7=>{const _0xf82857=_0x462471;_0x77d129(kernel_1[_0xf82857(0x142)]['ok'](_0x4f61a7[_0xf82857(0x151)]));},({response:_0x216a11,code:_0x3cbb8a})=>{const _0xee9234=_0x462471;if(_0x3cbb8a){_0x77d129(kernel_1[_0xee9234(0x142)][_0xee9234(0x152)](new Error(_0xee9234(0x14b)),_0x3cbb8a));return;}_0x77d129(kernel_1[_0xee9234(0x142)][_0xee9234(0x152)](new Error('Stream\x20Server\x20Error'),lodash_1[_0xee9234(0x14a)](_0x216a11,[_0xee9234(0x176),_0xee9234(0x159),'data'])));});});}async[a551_0x2a61d7(0x147)](_0x1e8d3d,_0x4c3d6c){const _0x5770ea=a551_0x2a61d7,[_0xc948c0,_0x2ac681]=await this[_0x5770ea(0x175)]();if(!_0xc948c0||!_0x2ac681)throw new kernel_1[(_0x5770ea(0x162))]();const {offset:_0x5b60ee,size:_0x1582a0}=_0x4c3d6c;return new Promise(_0x5f2b00=>{const _0x26f5b2=_0x5770ea;this[_0x26f5b2(0x15f)]['delete'](_0xc948c0+'/'+_0x2ac681+_0x26f5b2(0x14d)+_0x1e8d3d+_0x26f5b2(0x16c)+_0x5b60ee+'/'+_0x1582a0)[_0x26f5b2(0x144)](_0x4f63cb=>{const _0x4f0b40=_0x26f5b2;_0x5f2b00(kernel_1[_0x4f0b40(0x142)]['ok'](_0x4f63cb[_0x4f0b40(0x151)]));},({response:_0xaf24a1,code:_0x132be0})=>{const _0x50b8d1=_0x26f5b2;if(_0x132be0){_0x5f2b00(kernel_1[_0x50b8d1(0x142)][_0x50b8d1(0x152)](new Error(_0x50b8d1(0x14b)),_0x132be0));return;}_0x5f2b00(kernel_1[_0x50b8d1(0x142)][_0x50b8d1(0x152)](new Error(_0x50b8d1(0x16a)),lodash_1[_0x50b8d1(0x14a)](_0xaf24a1,[_0x50b8d1(0x176),_0x50b8d1(0x159),_0x50b8d1(0x151)])));});});}async[a551_0x2a61d7(0x156)](_0xef6470){const _0x54f58f=a551_0x2a61d7,[_0x56bbae,_0x410dfe]=await this[_0x54f58f(0x175)]();if(!_0x56bbae||!_0x410dfe)throw new kernel_1[(_0x54f58f(0x162))]();return new Promise(_0x271bbb=>{const _0x451efe=_0x54f58f;this[_0x451efe(0x15f)][_0x451efe(0x15a)](_0x56bbae+'/'+_0x410dfe+_0x451efe(0x14d)+_0xef6470)[_0x451efe(0x144)](_0x2d08c5=>{const _0x190c09=_0x451efe;_0x271bbb(kernel_1[_0x190c09(0x142)]['ok'](_0x2d08c5[_0x190c09(0x151)]));},({response:_0x542603,code:_0x10a95c})=>{const _0x4f9474=_0x451efe;if(_0x10a95c){_0x271bbb(kernel_1[_0x4f9474(0x142)][_0x4f9474(0x152)](new Error('Bad\x20Request'),_0x10a95c));return;}_0x271bbb(kernel_1[_0x4f9474(0x142)][_0x4f9474(0x152)](new Error(_0x4f9474(0x16a)),lodash_1[_0x4f9474(0x14a)](_0x542603,[_0x4f9474(0x176),_0x4f9474(0x159),_0x4f9474(0x151)])));});});}};RequestService=__decorate([common_1[a551_0x2a61d7(0x155)](),__metadata(a551_0x2a61d7(0x141),[common_1['HttpService'],settings_1[a551_0x2a61d7(0x171)]])],RequestService),exports['RequestService']=RequestService;